<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Bootstrap demo</title>
    <link href="./css/main.css" rel="styleSheet" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65"
      crossorigin="anonymous"
    />
    <script
      src="https://code.jquery.com/jquery-3.7.0.min.js"
      integrity="sha256-2Pmvv0kuTBOenSvLm6bvfBSSHrUJ+3A7x6P5Ebd07/g="
      crossorigin="anonymous"
    ></script>
    <!-- <script
      type="text/javascript"
      src="https://cdnjs.cloudflare.com/ajax/libs/hammer.js/2.0.8/jquery.hammer.js"
    ></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/hammer.js/2.0.8/hammer.min.js"></script> -->
  </head>
  <body>
    <div class="black-bg">
      <div class="white-bg">
        <h4>로그인하세요</h4>
        <form action="success.html">
          <div class="my-3">
            <input type="text" class="form-control" id="email" />
          </div>
          <div class="my-3">
            <input type="password" class="form-control" id="pw" />
          </div>
          <button type="submit" class="btn btn-primary" id="submitBtn">
            전송
          </button>
          <button type="button" class="btn btn-danger" id="close">닫기</button>
        </form>
      </div>
    </div>
    <script>
      $(".black-bg").on("click", function (e) {
        // console.log(e.target.className);
        // console.log($(".black-bg").className);
        if ($(e.target).is($(".black-bg"))) {
          $(".black-bg").removeClass("show-modal");
        }
      });
    </script>

    <script>
      $("form").on("submit", function (e) {
        let email = $("#email").val();
        let pw = $("#pw").val();
        if (email == "" || !/\S+@\S+\.\S+/.test(email)) {
          e.preventDefault();
          alert("아이디를 확인해주세요");
        } else if ($("#pw").val() == "" || !/[A-Z]/.test(pw)) {
          e.preventDefault();
          alert("비밀번호를 확인해주세요");
        }
      });
    </script>
    <nav class="navbar navbar-light bg-light">
      <div class="press-bar"></div>
      <div class="container-fluid">
        <span class="navbar-brand">Teger</span>
        <span class="badge bg-dark ms-auto mx-3">Dark 🔄</span>
        <button class="navbar-toggler" type="button">
          <span class="navbar-toggler-icon"></span>
        </button>
      </div>
    </nav>
    <script>
      // $(".navbar").on("scroll", function () {
      //   $(".navbar-brand").css("font-size", "15px;");
      // });
      // $(window).scroll(function () {
      //   $(".navbar-brand").css("font-size", "15px");
      //   if ($(window).scrollTop() == 0) {
      //     $(".navbar-brand").css("font-size", "20px");
      //   }
      // });
      $(window).scroll(function () {
        // $(".navbar-brand").css("font-size", "15px");
        if ($(window).scrollTop() == 0) {
          $(".navbar-brand").css("font-size", "20px");
        } else if ($(window).scrollTop() >= 200) {
          $(".navbar-brand").css("font-size", "15px");
        }
      });
    </script>
    <script>
      $(window).scroll(function () {
        console.log("scroll");
        let percent =
          ($(window).scrollTop() /
            ($(document).height() - $(window).height())) *
          100;
        percent = percent.toFixed();
        // console.log(`${percent}` + "%");
        // console.log($(window).scrollTop());
        // console.log($(document).height());
        // console.log($(window).height());
        // console.log(
        //   ($(window).scrollTop() /
        //     ($(document).height() - $(window).height())) *
        //     100,
        // );
        $(".press-bar").css("width", `${percent}` + "%");
      });
    </script>
    <script>
      var num = 0;
      // console.log(num, "ㄱ");
      $(".badge").on("click", function () {
        num++;
        // console.log(num, "ㄴ");
        if (num % 2 === 0) {
          //홀수면 font light
          $(".badge").addClass("ft-dark");
        } else {
          //짝수면 font dark
          // console.log(num, "ㄷ");
          $(".badge").removeClass("ft-dark");
        }
      });
    </script>

    <ul class="list-group">
      <li class="list-group-item">An item</li>
      <li class="list-group-item">A second item</li>
      <li class="list-group-item">A third item</li>
      <li class="list-group-item">A fourth item</li>
      <li class="list-group-item">And a fifth one</li>
    </ul>
    <div>
      <p class="hello">안녕</p>
      <p class="hello">안녕</p>
      <p class="hello">안녕</p>
      <button id="btn">로그인</button>
    </div>

    <script>
      document
        .querySelector(".navbar-toggler")
        .addEventListener("click", function () {
          document.querySelectorAll(".list-group")[0].classList.toggle("show");
        });

      $("#btn").on("click", function () {
        $(".black-bg").addClass("show-modal");
        $("#close").on("click", function () {
          $(".black-bg").removeClass("show-modal");
        });
      });

      // document.querySelector("#test-btn").addEventListener();
      // $("#btn").on("click", function () {
      //   $(".hello").fadeOut();
      // });
      // document.querySelectorAll(".hello")[0].innerHTML = "바보";
      // document.querySelectorAll(".hello")[1].innerHTML = "바보";
      // document.querySelectorAll(".hello")[2].innerHTML = "바보";
      $(".hello").text("바보");
      // $(".hello").css("color", "red");
      // $(".hello").css("fontSize", "20px");
      // $(".hello").addClass("show");
      // document
      //   .getElementsByClassName("navbar-toggler")[0]
      //   .addEventListener("click", function () {
      //     document
      //       .getElementsByClassName("list-group")[0]
      //       .classList.toggle("show");
      //   });
    </script>
    <div class="userMenu">
      Lorem ipsum dolor sit amet, consectetur adipisicing elit. Quae voluptas
      voluptatum minus praesentium fugit debitis at, laborum ipsa itaque placeat
      sit, excepturi eius. Nostrum perspiciatis, eligendi quae consectetur
      praesentium exercitationem.
    </div>
    <div style="height: 1000px"></div>
    <script>
      $(".userMenu").scroll(function () {
        if (
          $(".userMenu").scrollTop() + 100 ==
          $(".userMenu").prop("scrollHeight")
        ) {
          alert("전부 읽었습니다.");
        }
      });
    </script>
    <div class="alert alert-danger">5초 이내 구매시 사은품 증정</div>
    <script>
      let timer;
      let count = 5;

      timer = setInterval(function () {
        // console.log(count);
        $(".alert").html(count + "초 이내 구매시 사은품 증정");
        count--;
        if (count < 0) {
          $(".alert").hide();
          clearInterval(timer);
        }
      }, 1000);
    </script>
    <div style="overflow: hidden">
      <div class="slide-container">
        <div class="slide-box">
          <img draggable="false" src="./ex/img/구라1.jpeg" />
        </div>
        <div class="slide-box">
          <img draggable="false" src="./ex/img/구라2.jpeg" />
        </div>
        <div class="slide-box">
          <img draggable="false" src="./ex/img/구라3.jpeg" />
        </div>
        <div class="slide-box">
          <img draggable="false" src="./ex/img/구라4.jpeg" />
        </div>
      </div>
    </div>
    <button class="btn1">1</button>
    <button class="btn2">2</button>
    <button class="btn3">3</button>
    <button class="before">이전</button>
    <button class="next">다음</button>
    <script>
      let start = 0;
      let click = false;
      let over = false;
      let len = 0;
      let pic = 0;
      let slide = $(".slide-box");
      let container = $(".slide-container");
      $(".btn1").on("click", function () {
        // container.css("transform", "translateX(-0vw)");
        pic = 0;
        click = false;
        transform(pic);
        // console.log("q", $(this).index());
      });
      $(".btn2").on("click", function () {
        // container.css("transform", "translateX(-100vw)");
        pic = 1;
        click = false;
        transform(pic);
        // console.log("w", $(this).index());
      });
      $(".btn3").on("click", function () {
        // container.css("transform", "translateX(-200vw)");
        pic = 2;
        click = false;
        transform(pic);
        // console.log("e", $(this).index());
      });
      // var box = $(".slide-box").eq(0);
      // var hammer = new Hammer.Manager(box);
      // var swipe = new Hammer.Swipe();
      // hammer.add(
      //   new Hammer.Pan({
      //     threshold: 0,
      //   }),
      // );
      // hammer.add(swipe);
      // hammer.on("pan", function (e) {
      //   console.log(e.deltaX);
      // });
      let index = 0;
      slide.mousedown(function (e) {
        start = e.clientX;
        click = true;
        // console.log("111", start);
        // console.log(slide.length);
        // index = $(this).index();
        // console.log("container : ", index);
        index = $(this).index();
        slide.eq(`${index}`).mousemove(function (e) {
          console.log("box : ", index);
          let base = -870 * index;

          // console.log("this : ", $(this));
          end = e.clientX;
          len = end - start + base;
          const length = end - start;
          // console.log("length", length);
          // console.log("len", len);
          if (click) {
            if (index === 0 && len > 0) return;
            if (index === slide.length - 1 && len <= base) return;
            container.css("transform", `translateX(${len}px)`);
            container.css("transition", "all 0s");
          }
          slide.eq(`${pic}`).mouseup(function (e) {
            click = false;
            if (index === 0 && len > 0) return;
            if (index === slide.length - 1 && len <= base) return;
            if ((length < 0 && length > -150) || (length > 0 && length < 150)) {
              //자기자신
              // console.log("kkkkk", click);
              // container.css("transform", `translateX(-${pic}00vw)`);
              // container.css("transition", "all 1s");
              transform(pic);
            } else if (length > 0 && 150 <= length) {
              //앞으로 넘기기
              pic = index - 1;
              // console.log("pic :", pic);
              transform(pic);
              // container.css("transform", `translateX(-${pic}00vw)`);
              // container.css("transition", "all 1s");
            } else if (length < 0 && length <= -150) {
              //뒤로넘기기
              pic = index + 1;
              // console.log("pic :", pic);
              transform(pic);
              // container.css("transform", `translateX(-${pic}00vw)`);
              // container.css("transition", "all 1s");
            }
          });
        });
      });
      // $(".slide-box")
      //   .eq(1)
      //   .on("mousedown", function (e) {
      //     start = e.clientX;
      //     click = true;
      //     console.log(start);
      //   });

      // $(".slide-box")
      //   .eq(1)
      //   .on("mousemove", function (e) {
      //     let end = e.clientX;
      //     len = end - start;
      //     if (click) {
      //       console.log(len);
      //       $(".slide-container").css("transform", `translateX(${len}px)`);
      //       $(".slide-container").css("transition", "all 0s");
      //     }
      //   });
      // $(".slide-box")
      //   .eq(1)
      //   .on("mouseup", function (e) {
      //     click = false;
      //     if (len <= -200) {
      //       pic++;
      //       console.log("hhhhh", click);
      //       $(".slide-container").css("transform", `translateX(-${pic}00vw)`);
      //       $(".slide-container").css("transition", "all 1s");
      //     } else if (len > -200) {
      //       // console.log("kkkkk", click);
      //       $(".slide-container").css("transform", `translateX(-${pic}00vw)`);
      //       $(".slide-container").css("transition", "all 1s");
      //     }
      //     // console.log("zzzz", click);
      //   });

      $(".before").on("click", function () {
        // console.log(pic);
        if (pic > 0) {
          pic -= 1;
          click = false;
          // container.css("transform", `translateX(-${pic}00vw)`);
          transform(pic);
        } else {
          pic = $("img").length - 1;
          click = false;
          transform(pic);
          // container.css("transform", `translateX(-${pic}00vw)`);
        }
      });
      $(".next").on("click", function () {
        if (pic < $("img").length - 1) {
          pic += 1;
          click = false;
          transform(pic);
          // container.css("transform", `translateX(-${pic}00vw)`);
        } else {
          click = false;
          // container.css("transform", `translateX(0vw)`);
          pic = 0;
          transform(pic);
        }
      });

      function transform(num) {
        container.css("transform", `translateX(-${num}00vw)`);
        container.css("transition", "all 1s");
      }
    </script>

    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4"
      crossorigin="anonymous"
    ></script>
  </body>
</html>
